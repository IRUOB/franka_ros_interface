
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>1. Franka ROS Interface &#8212; franka_ros_interface 0.0.1 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="1. Python API Documentation" href="DOC.html" />
    <link rel="prev" title="Welcome to franka_ros_interface’s documentation!" href="index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="DOC.html" title="1. Python API Documentation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to franka_ros_interface’s documentation!"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">franka_ros_interface 0.0.1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="franka-ros-interface-build-status">
<h1>1. Franka ROS Interface <a class="reference external" href="https://travis-ci.org/justagist/franka_ros_interface"><img alt="Build Status" src="https://travis-ci.org/justagist/franka_ros_interface.svg?branch=master" /></a><a class="headerlink" href="#franka-ros-interface-build-status" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://opensource.org/licenses/Apache-2.0"><img alt="License" src="https://img.shields.io/badge/License-Apache%202.0-blue.svg" /></a></p>
<p>A ROS API for the Franka Emika Panda robot, extending the <a class="reference external" href="https://frankaemika.github.io/docs/franka_ros.html">franka_ros</a> to expose more information about the robot, and
providing low level control of the robot using ROS and Python API.</p>
<p>Provides controlling and managing the Franka Emika Panda robot (real and
simulated). Contains exposed controllers for the robot (joint position,
velocity, torque), interfaces for the gripper, controller manager,
coordinate frames, etc. Provides almost complete sim-to-real /
real-to-sim transfer of code with the <a class="reference external" href="https://github.com/justagist/panda_simulator">panda_simulator</a>
package.</p>
<div class="section" id="features">
<h2>1.1. Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Low-level <em>controllers</em> (joint position, velocity, torque, impedance)
available that can be controlled through ROS topics (including
position control for gripper).</li>
<li>Real-time <em>robot state</em> (end-effector state, joint state, controller
state, etc.) available through ROS topics.</li>
<li>Python API to monitor and control the robot using any of the
available controllers.</li>
<li>Python API for managing controllers, coordinate frames, controlling
and monitoring the gripper.</li>
<li>The <a class="reference external" href="https://github.com/justagist/panda_simulator">panda_simulator</a> package (which is Gazebo-based
simulator for the robot) can also be controlled using this package
(ROS and Python interface), providing almost complete sim-to-real
transfer of code.</li>
</ul>
</div>
<div class="section" id="continuous-integration-builds">
<h2>1.2. Continuous Integration Builds<a class="headerlink" href="#continuous-integration-builds" title="Permalink to this headline">¶</a></h2>
<p>ROS Kinetic / Melodic: <a class="reference external" href="https://travis-ci.org/justagist/franka_ros_interface"><img alt="Build Status" src="https://travis-ci.org/justagist/franka_ros_interface.svg?branch=master" /></a></p>
</div>
<div class="section" id="dependencies">
<h2>1.3. Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><em>libfranka</em> (<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">install</span> <span class="pre">ros-$ROS_DISTRO-libfranka</span></code> or
<a class="reference external" href="https://frankaemika.github.io/docs/installation_linux.html#building-from-source">install from source</a>).</li>
<li><em>franka-ros</em> (<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">install</span> <span class="pre">ros-$ROS_DISTRO-franka-ros</span></code> or
<a class="reference external" href="https://frankaemika.github.io/docs/installation_linux.html#building-from-source">install from source</a>)</li>
<li>(optional, but recommended) <a class="reference external" href="https://github.com/justagist/franka_panda_description">franka_panda_description</a> (See <a class="reference external" href="#related-packages">Related
Packages</a> section for information about package). <strong>NOTE</strong>: If you
do not want to use the <em>franka_panda_description</em> package, make sure
you modify the <code class="docutils literal notranslate"><span class="pre">franka_interface/launch/interface.launch</span></code> file and
replace all occurences of <code class="docutils literal notranslate"><span class="pre">franka_panda_description</span></code> with
<code class="docutils literal notranslate"><span class="pre">franka_description</span></code> (two occurences).</li>
</ul>
</div>
<div class="section" id="installation">
<h2>1.4. Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Once the above dependencies are installed, the package can be installed
using catkin:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd &lt;catkin_ws&gt;
$ git clone https://github.com/justagist/franka_ros_interface src/franka_ros_interface
$ catkin build franka_ros_interface # or catkin_make
$ source devel/setup.bash
</pre></div>
</div>
<p>After building the package:</p>
<ul class="simple">
<li>Copy/move the <em>franka.sh</em> file to the root of the catkin_ws
<code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">cp</span> <span class="pre">src/franka_ros_interface/franka.sh</span> <span class="pre">./</span></code></li>
<li>Change the values in the copied file (described in the file).</li>
</ul>
</div>
<div class="section" id="usage">
<h2>1.5. Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>The ‘driver’ node can be started by running (can only be used if run in
‘master’ environment - see <a class="reference external" href="#the-frankash-environments">Environments</a> section below):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ roslaunch franka_interface interface.launch # (use argument load_gripper:=false for starting without gripper)
</pre></div>
</div>
<p>This exposes a variety of ROS topics and services for communicating with
and controlling the robot. This can be accessed and modified using ROS
topics and services (see below too find out about some of the available
topics and services), or using the provided Python API (see
<em>franka_interface</em> and <em>franka_tools</em> directories).</p>
<div class="section" id="the-franka-sh-environments">
<span id="the-frankash-environments"></span><h3>1.5.1. The <em>franka.sh</em> environments<a class="headerlink" href="#the-franka-sh-environments" title="Permalink to this headline">¶</a></h3>
<p>Once the values are correctly modified in the <code class="docutils literal notranslate"><span class="pre">franka.sh</span></code> file, different environments can be
set for controlling the robot by sourcing this file.</p>
<ul class="simple">
<li>For instance, running <code class="docutils literal notranslate"><span class="pre">./franka.sh</span> <span class="pre">master</span></code> would start an
environment assuming that the computer is directly connected to the
robot (requires Real-Time kernel set up as described in the <a class="reference external" href="https://frankaemika.github.io/docs/installation_linux.html">FCI
documentation</a>).</li>
<li>On the other hand, <code class="docutils literal notranslate"><span class="pre">./franka.sh</span> <span class="pre">slave</span></code> would start an environment
assuming that the robot is not connected directly to the computer,
but to another computer in the network (whose IP must be specified in
<em>franka.sh</em>). This way, if the ‘master’ is connected to the robot and
running the driver node (see below), the ‘slave’ can control the
robot (<strong>no need for Real Time kernel!</strong>) as long as they are in the
same network.</li>
<li>Simulation environment can be started by running <code class="docutils literal notranslate"><span class="pre">./franka.sh</span> <span class="pre">sim</span></code>
(only required when using <a class="reference external" href="https://github.com/justagist/panda_simulator">panda_simulator</a> package).</li>
</ul>
</div>
<div class="section" id="some-useful-ros-topics">
<h3>1.5.2. Some useful ROS topics<a class="headerlink" href="#some-useful-ros-topics" title="Permalink to this headline">¶</a></h3>
<div class="section" id="published-topics">
<h4>1.5.2.1. Published Topics:<a class="headerlink" href="#published-topics" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">ROS Topic</th>
<th class="head">Data</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><em>/
franka_ros_interface/custom_fran
ka_state_controller/robot_state</em></td>
<td>gravity, coriolis, jacobian,
cartesian velocity, etc.</td>
</tr>
<tr class="row-odd"><td><em>/franka_ros_interface/custom_fr
anka_state_controller/tip_state</em></td>
<td>end-effector pose, wrench, etc.</td>
</tr>
<tr class="row-even"><td><em>/fr
anka_ros_interface/joint_states</em></td>
<td>joint positions, velocities,
efforts</td>
</tr>
<tr class="row-odd"><td><em>/franka_ros_interf
ace/franka_gripper/joint_states</em></td>
<td>joint positions, velocities,
efforts of gripper joints</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="subscribed-topics">
<h4>1.5.2.2. Subscribed Topics:<a class="headerlink" href="#subscribed-topics" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">ROS Topic</th>
<th class="head">Data</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><em>/franka_ros_interface/motio
n_controller/arm/joint_commands</em></td>
<td>command the robot using the
currently active controller</td>
</tr>
<tr class="row-odd"><td><em>/franka_ros_interface/franka_g
ripper/[move/grasp/stop/homing]</em></td>
<td>(action msg) command the joints
of the gripper</td>
</tr>
</tbody>
</table>
<p>Other topics for changing the controller gains (also dynamically
configurable), command timeout, etc. are also available.</p>
</div>
</div>
<div class="section" id="ros-services">
<h3>1.5.3. ROS Services:<a class="headerlink" href="#ros-services" title="Permalink to this headline">¶</a></h3>
<p>Controller manager service can be used to switch between all available
controllers (joint position, velocity, effort). Gripper joints can be
controlled using the ROS ActionClient. Other services for changing
coordinate frames, adding gripper load configuration, etc. are also
available.</p>
</div>
<div class="section" id="python-api">
<h3>1.5.4. Python API<a class="headerlink" href="#python-api" title="Permalink to this headline">¶</a></h3>
<p>Most of the above services and topics are wrapped using simple Python
classes or utility functions, providing more control and simplicity.
See <a class="reference external" href="https://justagist.github.io/franka_ros_interface/DOC.html">Python API Documentation</a>.
Refer induvidual Python files in <em>franka_interface</em> and <em>franka_tools</em>
directories for more details.</p>
</div>
</div>
<div class="section" id="related-packages">
<h2>1.6. Related Packages<a class="headerlink" href="#related-packages" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/justagist/panda_simulator">panda_simulator</a> : A Gazebo simulator for the Franka Emika Panda
robot with ROS interface, providing exposed controllers and real-time
robot state feedback similar to the real robot when using the
<em>franka_ros_interface</em> package. Provides almost complete real-to-sim
transfer of code.</li>
<li><a class="reference external" href="https://github.com/justagist/panda_robot">panda_robot</a> : Python interface providing higher-level control of
the robot integrated with its gripper control, controller manager,
coordinate frames manager, etc. with safety checks and other helper
utilities. It also provides the kinematics and dynamics of the robot
using the <a class="reference external" href="http://wiki.ros.org/kdl">KDL library</a>.</li>
<li><a class="reference external" href="https://github.com/justagist/franka_panda_description">franka_panda_description</a> : Robot description package modified from
<a class="reference external" href="https://frankaemika.github.io/docs/franka_ros.html">franka_ros</a> package to include dynamics parameters for the robot
arm (as estimated in <a class="reference external" href="https://hal.inria.fr/hal-02265293/document">this paper</a>). Also includes transmission and
control definitions required for the <a class="reference external" href="https://github.com/justagist/panda_simulator">panda_simulator</a> package.</li>
</ul>
</div>
<div class="section" id="license">
<h2>1.7. License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://opensource.org/licenses/Apache-2.0"><img alt="License" src="https://img.shields.io/badge/License-Apache%202.0-blue.svg" /></a></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">1. Franka ROS Interface </a><ul>
<li><a class="reference internal" href="#features">1.1. Features</a></li>
<li><a class="reference internal" href="#continuous-integration-builds">1.2. Continuous Integration Builds</a></li>
<li><a class="reference internal" href="#dependencies">1.3. Dependencies</a></li>
<li><a class="reference internal" href="#installation">1.4. Installation</a></li>
<li><a class="reference internal" href="#usage">1.5. Usage</a><ul>
<li><a class="reference internal" href="#the-franka-sh-environments">1.5.1. The <em>franka.sh</em> environments</a></li>
<li><a class="reference internal" href="#some-useful-ros-topics">1.5.2. Some useful ROS topics</a><ul>
<li><a class="reference internal" href="#published-topics">1.5.2.1. Published Topics:</a></li>
<li><a class="reference internal" href="#subscribed-topics">1.5.2.2. Subscribed Topics:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ros-services">1.5.3. ROS Services:</a></li>
<li><a class="reference internal" href="#python-api">1.5.4. Python API</a></li>
</ul>
</li>
<li><a class="reference internal" href="#related-packages">1.6. Related Packages</a></li>
<li><a class="reference internal" href="#license">1.7. License</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Welcome to franka_ros_interface’s documentation!</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="DOC.html"
                        title="next chapter">1. Python API Documentation</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/readme_link.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="DOC.html" title="1. Python API Documentation"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to franka_ros_interface’s documentation!"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">franka_ros_interface 0.0.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Saif Sidhik.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>